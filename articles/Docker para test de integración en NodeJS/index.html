<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Iván Corrales Solera , wesovilabs">

    <title>Docker en la ejecución de test de integración en NodeJS</title>

    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../css/blog-home.css" rel="stylesheet">
    <link href="../../css/landing-page.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top topnav" role="navigation">
    <div class="container topnav">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand topnav" href="#"><font color="#636363">&lt;</font>W<font color="#000000">L</font><font color="#636363">/&gt;</font></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="../../index.html">Home</a>
                </li>
                <li>
                    <a href="../0.html">Blog</a>
                </li>
                <li>
                    <a href="mailto:info@wesovilabs.com">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Page Content -->
<div class="container">
    <!-- Pager -->
    <ul class="pager">
        <li class="previous">
            <a href="../1.html">&larr; Back to index</a>
        </li>
    </ul>
    <h1 class="page-header">
        <font color="#BE290B">Docker </font>en la ejecución de test de integración en <font color="#BE290B">NodeJS</font>
    </h1>

    <div class="row">
        <!-- Blog Post Content Column -->
        <div class="col-lg-8">

            <!-- Author -->
            <p class="lead">
                by <a href="#" class="author">Iván Corrales Solera</a>
            </p>

            <!-- Date/Time -->
            <p><span class="glyphicon glyphicon-time"></span> Posted on July 28th, 2015</p>

            <!-- Preview Image -->
            <img class="img-responsive" src="Docker_banner1.jpg" alt="">
            <hr>
            <article class="post-content">
                <h2 id="motivacin">Motivación</h2>

                <p>El <strong>objetivo</strong> de este tutorial es permitir al <strong>desarrollador de NodeJS</strong> tener unas nociones básicas de como realizar el <strong>despliegue de su aplicación a través de contenedores (<code>docker</code>)</strong> y llevando la orquestación de estos con <code>docker-compose</code>. Del mismo modo, este tutorial nos enseñará como tomar ventaja del uso de contenedores a la hora de ejecutar nuestros tests de integración, mejorando de este modo la calidad de nuestros desarrollos.</p>

                <h2 id="requisitos">Requisitos</h2>

                <p>Aunque no es imprescindible, se aconseja tener <strong>conocimientos básicos de NodeJS</strong> para el seguimiento de este tutorial.</p>

                <h2 id="propsito">Propósito</h2>

                <p>Aunque el tutorial este basado en una aplicación desarrollada con NodeJS que se conecta a una base de datos MongoDB, la finalidad de este tutorial no es <strong>enseñar</strong> como desarrollar aplicaciones <code>javascript</code> sino mostrar al desarrollador como puede tomar <strong>ventaja del uso de docker y docker-compose en el desarrollo de sus aplicaciones</strong></p>

                <h2 id="detalle-del-tutorial">Detalle del tutorial</h2>

                <p>En el tutorial <strong>desarrollaremos</strong> una <code>API rest</code> desde  con haciendo uso de <code>NodeJS</code> y de la librería <code>mongoose</code>. Usaremos <code>express</code> como servidor de aplicaciones.</p>

                <h2 id="estructura-del-proyecto">Estructura del proyecto</h2>

                <p>El <strong>código fuente</strong> de este proyecto <strong><a target="_blank" class="link" href="https://github.com/abirtone/blog-examples/tree/master/2015-07-28-uso-de-docker-en-aplicacion-de-nodejs">puede ser descargado desde nuestro repositorio público de Github →</a></strong>. A continuación explicamos la estructura de directorio que encontrarás en este proyecto:</p>

                <ul>
                    <li>abirtone-blog-agenda-api
                        <ul>
                            <li>etc: Contioene los ficheros de configuración de <code>docker-compose</code></li>
                            <li>config: Ficheros de  configuración de las rutas y de neustro servior express.</li>
                            <li>app:
                                <ul>
                                    <li>models: Modelos de datos (Definidos con mongoose)</li>
                                    <li>routes: Implementación de lógica de negocio usada por nuestra aplicación.</li>
                                </ul>
                            </li>
                            <li>test: Tests de integración implementados con <code>supertest</code> y <code>should</code>.</li>
                            <li>application.js: Fichero de arranque de nuestra aplicación.</li>
                            <li>pacakge.json</li>
                            <li>nodemon.json</li>
                            <li>Dockerfile: Fichero utilizado para construir una imagen de Docker de nuestra aplicación.</li>
                        </ul>
                    </li>
                </ul>

                <h2 id="implementando-una-api-rest-con-nodejs-y-mongoose">Implementando una API Rest con NodeJS y Mongoose</h2>

                <p>Partimos de la base de que contamos con <strong>NodeJS instalado</strong> en nuestro sistema. Para cualquier duda os sugerimos visitar la página oficial de nodejs en <a href="http://nodejs.org">NodeJS Official Site</a></p>

                <p><strong>Definiendo nuestro modelo de datos</strong></p>

                <p>Para <strong>almancenar</strong> los datos usaremos <code>MongoDB</code> como base de datos y la librería <code>mongoose</code> para la definición de nuestras colecciones así como para la lectura/escritura en nuestro sistema. A continuación se muestra <strong>nuestro modelo de datos</strong> que esta definido en los siguientes ficheros:</p>

                <p><em>app/models/contact.js</em></p>

                <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">ContactSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
                    <span class="nx">firstName</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
                    <span class="nx">lastName</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
                    <span class="nx">favourite</span><span class="o">:</span> <span class="nb">Boolean</span><span class="p">,</span>
                    <span class="nx">bornDate</span><span class="o">:</span> <span class="nb">Date</span><span class="p">,</span>
                    <span class="nx">phone</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
                    <span class="nx">email</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
                    <span class="nx">creationdDate</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="nb">Date</span><span class="p">,</span> <span class="k">default</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">}</span>
                    <span class="p">});</span></code></pre></div>

                <p><em>app/models/agenda.js</em></p>

                <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">AgendaSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
                    <span class="nx">title</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
                    <span class="nx">description</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
                    <span class="nx">creationdDate</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="nb">Date</span><span class="p">,</span> <span class="k">default</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">},</span>
                    <span class="nx">contacts</span><span class="o">:</span> <span class="p">[</span><span class="nx">Contact</span><span class="p">.</span><span class="nx">schema</span><span class="p">]</span>
                    <span class="p">});</span></code></pre></div>

                <p><strong>CONFIGURACIÓN DE EXPRESS</strong></p>

                <p>Tal y como hemos comentado anteriormente, haremos uso de <strong>express para desplegar nuestra aplicación</strong>. Una buena práctica para organizar nuestro código es tener la configuración de <code>express</code> aislada del resto de código, por eso podemos ver la configuración de nuestro servidor a continuación.</p>

                <p><em>config/express.js</em></p>

                <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Creamos la conexión con nuestra mongodb a trabés de mongoose.</span>
                    <span class="kd">var</span> <span class="nx">mongoHost</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">MONGO_ADDR</span> <span class="o">||</span> <span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">mongoPort</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">[</span><span class="s1">&#39;MONGO_PORT&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;27017&#39;</span><span class="p">;</span>
                    <span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">&#39;mongodb://&#39;</span><span class="o">+</span><span class="nx">mongoHost</span><span class="o">+</span><span class="s1">&#39;:&#39;</span><span class="o">+</span><span class="nx">mongoPort</span><span class="o">+</span><span class="s1">&#39;/it-blogs&#39;</span><span class="p">);</span>

                    <span class="c1">//Implementamos CORS para nuestra API  </span>
                    <span class="kd">var</span> <span class="nx">allowCrossDomain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Access-Control-Allow-Methods&#39;</span><span class="p">,</span> <span class="s1">&#39;GET,PUT,POST,DELETE&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Access-Control-Allow-Headers&#39;</span><span class="p">,</span> <span class="s1">&#39;Content-Type&#39;</span><span class="p">);</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>

                    <span class="c1">//Aquí definimos los middlewares de express</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">app</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">==</span> <span class="s1">&#39;prod&#39;</span><span class="p">){</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">(</span><span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">skip</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">&lt;</span> <span class="mi">400</span> <span class="p">},</span> <span class="nx">stream</span><span class="o">:</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&#39;/../morgan.log&#39;</span> <span class="p">}));</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">(</span><span class="s1">&#39;dev&#39;</span><span class="p">));</span>
                    <span class="p">}</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">compression</span><span class="p">({</span>
                    <span class="nx">threshold</span><span class="o">:</span> <span class="mi">512</span>
                    <span class="p">}));</span>

                    <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">validator</span><span class="p">());</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cookieParser</span><span class="p">());</span>

                    <span class="c1">//Hacemos uso de nuestro middleware creado anteriormente.</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">allowCrossDomain</span><span class="p">);</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">session</span><span class="p">({</span>
                    <span class="nx">resave</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nx">saveUninitialized</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nx">secret</span><span class="o">:</span> <span class="nx">pkg</span><span class="p">.</span><span class="nx">name</span>
                    <span class="p">}));</span>

                    <span class="p">};</span></code></pre></div>

                <p><strong>DEFINICIÓN DE RUTAS</strong></p>

                <p>Nuestra <strong>API implementará</strong> los servicios descritos a continuación.</p>

                <p><em>config/routes.js</em></p>

                <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Crear una nueva agenda</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/agendas&#39;</span><span class="p">,</span><span class="nx">agendaRoute</span><span class="p">.</span><span class="nx">createAgenda</span><span class="p">);</span>

                    <span class="c1">//Elimina una agenda de nuestro sistem, así como los contactos incluidos dentro de ella.</span>
                    <span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;/agendas/:agenda_id&#39;</span><span class="p">,</span><span class="nx">agendaRoute</span><span class="p">.</span><span class="nx">deleteAgenda</span><span class="p">);</span>

                    <span class="c1">//Devuelve la lista de agendas almacenadas en nuestro sistema.</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/agendas&#39;</span><span class="p">,</span><span class="nx">agendaRoute</span><span class="p">.</span><span class="nx">getListOfAgendas</span><span class="p">);</span>

                    <span class="c1">//Da de alta un nuevo contacto en una agenda</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/agendas/:agenda_id/contacts&#39;</span><span class="p">,</span><span class="nx">contactRoute</span><span class="p">.</span><span class="nx">createContact</span><span class="p">);</span>

                    <span class="c1">//Devuelve la lista de contactos almacenados en una agenda</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/agendas/:agenda_id/contacts&#39;</span><span class="p">,</span><span class="nx">contactRoute</span><span class="p">.</span><span class="nx">getContactsInAgenda</span><span class="p">);</span>

                    <span class="c1">//Devuelve los detalles de un contacto</span>
                    <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/agendas/:agenda_id/contacts/:contact_id&#39;</span><span class="p">,</span><span class="nx">contactRoute</span><span class="p">.</span><span class="nx">getContactDetail</span><span class="p">);</span></code></pre></div>

                <p><strong>IMPLEMENTACIÓN DE LA LÓGICA DE NEGOCIO</strong></p>

                <p>La implementación de estos servicios puede ser encontrada en el directorio <em>app/routes</em>, allí encontramos <strong>2 ficheros llamados agenda y contact</strong> que tienen la implementación de la lógica de negocio que se encargará de la comunicación con nuestra base de datos.</p>

                <p><em>app/routes/agenda.js</em></p>

                <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Crear una nueva agenda</span>
                    <span class="nx">exports</span><span class="p">.</span><span class="nx">createAgenda</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Creating a new agenda&#39;</span><span class="p">);</span>
                    <span class="nx">agendaValidation</span><span class="p">(</span><span class="nx">req</span><span class="p">);</span>
                    <span class="nx">checkRequestValidationErrors</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">);</span>
                    <span class="nx">agenda</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Agenda</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
                    <span class="nx">agenda</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Agendas has been created successfuly.&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">201</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">agenda</span><span class="o">:</span> <span class="nx">agenda</span><span class="p">});</span>
                    <span class="p">});</span>
                    <span class="p">}</span>

                    <span class="c1">//Elimina una agenda de nuestro sistem, así como los contactos incluidos dentro de ella.</span>
                    <span class="nx">exports</span><span class="p">.</span><span class="nx">deleteAgenda</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Deleting existing agenda and its contacts.&#39;</span><span class="p">);</span>
                    <span class="nx">Agenda</span><span class="p">.</span><span class="nx">remove</span><span class="p">({</span><span class="nx">_id</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">&#39;agenda_id&#39;</span><span class="p">)},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">errors</span><span class="o">:</span><span class="nx">err</span><span class="p">});</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;The agenda with id &#39;</span><span class="o">+</span><span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">&#39;agenda_id&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; has been removed successfuly.&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">204</span><span class="p">);</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">});</span>
                    <span class="p">}</span>

                    <span class="c1">//Devuelve la lista de agendas almacenadas en nuestro sistema.</span>
                    <span class="nx">exports</span><span class="p">.</span><span class="nx">getListOfAgendas</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Return the list of agendas.&#39;</span><span class="p">);</span>
                    <span class="nx">Agenda</span><span class="p">.</span><span class="nx">find</span><span class="p">({})</span>
                    <span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;title description&#39;</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="nx">agendas</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Unexpected error while invoking mongo database.&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">errors</span><span class="o">:</span><span class="nx">err</span><span class="p">});</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">agendas</span><span class="p">);</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">});</span>
                    <span class="p">}</span>

                    <span class="kd">function</span> <span class="nx">checkRequestValidationErrors</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
                    <span class="kd">var</span> <span class="nx">errors</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">validationErrors</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Something failed while creating the agenda.&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">errors</span><span class="o">:</span><span class="nx">errors</span><span class="p">});</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="p">}</span>


                    <span class="kd">function</span> <span class="nx">agendaValidation</span><span class="p">(</span><span class="nx">req</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Validaing the agenda request.&#39;</span><span class="p">);</span>
                    <span class="nx">req</span><span class="p">.</span><span class="nx">checkBody</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="s1">&#39;required&#39;</span><span class="p">).</span><span class="nx">notEmpty</span><span class="p">();</span>
                    <span class="p">}</span></code></pre></div>

                <p><em>app/routes/contact.js</em></p>

                <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Da de alta un nuevo contacto en una agenda</span>
                    <span class="nx">exports</span><span class="p">.</span><span class="nx">createContact</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Adding new contact into the agenda.&#39;</span><span class="p">);</span>
                    <span class="nx">contactValidation</span><span class="p">(</span><span class="nx">req</span><span class="p">);</span>
                    <span class="nx">checkRequestValidationErrors</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">);</span>

                    <span class="nx">Agenda</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="nx">_id</span><span class="o">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">&#39;agenda_id&#39;</span><span class="p">)},</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="nx">agenda</span><span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;Agenda was found then adding contact to agenda.&quot;</span><span class="p">);</span>
                    <span class="nx">contact</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contact</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>

                    <span class="nx">agenda</span><span class="p">.</span><span class="nx">contacts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">contact</span><span class="p">);</span>
                    <span class="nx">agenda</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Contact has been added to the agenda successfuly.&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">201</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">contact</span><span class="o">:</span> <span class="nx">contact</span><span class="p">});</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">});</span>
                    <span class="p">});</span>
                    <span class="p">}</span>

                    <span class="c1">//Devuelve la lista de contactos almacenados en una agenda</span>
                    <span class="nx">exports</span><span class="p">.</span><span class="nx">getContactsInAgenda</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Return the list of contacts  for an agenda.&#39;</span><span class="p">);</span>
                    <span class="nx">Agenda</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="nx">_id</span><span class="o">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">&#39;agenda_id&#39;</span><span class="p">)})</span>
                    <span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;contacts&#39;</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="nx">agenda</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Unexpected error while invoking mongo database.&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">errors</span><span class="o">:</span><span class="nx">err</span><span class="p">});</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">agenda</span><span class="p">.</span><span class="nx">contacts</span><span class="p">);</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">});</span>
                    <span class="p">}</span>

                    <span class="c1">//Devuelve los detalles de un contacto</span>
                    <span class="nx">exports</span><span class="p">.</span><span class="nx">getContactDetail</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Return the contact details&#39;</span><span class="p">);</span>
                    <span class="nx">Agenda</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="s1">&#39;contacts._id&#39;</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">&#39;contact_id&#39;</span><span class="p">)},</span> <span class="p">{</span><span class="s1">&#39;contacts.$&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">},</span>
                    <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">agenda</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Unexpected error while invoking mongo database.&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">errors</span><span class="o">:</span><span class="nx">err</span><span class="p">});</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">agenda</span><span class="p">.</span><span class="nx">contacts</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="p">);</span>
                    <span class="p">}</span>

                    <span class="kd">function</span> <span class="nx">checkRequestValidationErrors</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
                    <span class="kd">var</span> <span class="nx">errors</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">validationErrors</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Something failed while creating the contact.&#39;</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">errors</span><span class="o">:</span><span class="nx">errors</span><span class="p">});</span>
                    <span class="nx">next</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="p">}</span>

                    <span class="kd">function</span> <span class="nx">contactValidation</span><span class="p">(</span><span class="nx">req</span><span class="p">){</span>
                    <span class="nx">winston</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Validaing the contact request.&#39;</span><span class="p">);</span>
                    <span class="nx">req</span><span class="p">.</span><span class="nx">checkBody</span><span class="p">(</span><span class="s1">&#39;firstName&#39;</span><span class="p">,</span><span class="s1">&#39;required&#39;</span><span class="p">).</span><span class="nx">notEmpty</span><span class="p">();</span>
                    <span class="p">}</span></code></pre></div>

                <h2 id="despliegue-de-aplicacin-con-contenedores">Despliegue de aplicación con contenedores</h2>

                <p>Para el uso de <strong>Docker</strong> y <strong>Docker-Compose</strong> en sistemas operativos distintos a Linux utilizaremos <strong>boot2docker</strong>. Si aún no tenemos instalado en nuestro sistema Docker o boot2docker podéis echar un vistazo a los siguientes links:</p>

                <ul>
                    <li><a href="https://www.docker.com/">Docker Official Site</a></li>
                    <li><a href="http://boot2docker.io/">Boot2Docker Official Site</a></li>
                </ul>

                <p>En el directorio <code>etc</code> encontraremos un fichero llamado <code>docker-compose.yml</code>, esté, será quien orqueste los contenedores requeridos para el despliegue del sistema. Si echamos un vistazo a este fichero veremos lo siguiente:</p>

                <div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">mongo</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mongo:latest</span>
                    <span class="l-Scalar-Plain">restart</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">always</span>
                    <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mongod --smallfiles --quiet --logpath=/dev/null --rest --httpinterface</span>
                    <span class="l-Scalar-Plain">ports</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="s">&quot;37017:27017&quot;</span>
                    <span class="p-Indicator">-</span> <span class="s">&quot;38017:28017&quot;</span>


                    <span class="l-Scalar-Plain">application</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">build</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">../</span>
                    <span class="l-Scalar-Plain">volumes</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">../app:/src/app</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">../config:/src/config</span>
                    <span class="l-Scalar-Plain">ports</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="s">&quot;4000:3000&quot;</span>
                    <span class="l-Scalar-Plain">environment</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">RUN_MODE=prod</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">LOGS_DIR=/var/logs/agenda</span>
                    <span class="l-Scalar-Plain">links</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="s">&quot;mongo:mongo&quot;</span>
                    <span class="l-Scalar-Plain">volumes</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">logs:/var/logs/agenda</span></code></pre></div>

                <p>Como podemos observar en el fichero anterior docker-compose.yml, contamos con dos contenedores:</p>

                <ul>
                    <li><strong>mongo</strong>: Se trata de una instancia de mongo que será utilizada por nuestra aplicación.</li>
                    <li><strong>application</strong>: Se trata de la “contenerización” de nuestra propia aplicación.</li>
                </ul>

                <p>Para mongo usamos la imagen oficial, y lo indicamos así: <code>image: mongo:latest</code>, mientras que para la aplicación haremos que docker-compose cree una imagen y la almacene en nuestro repositorio local <code>build: ../</code>, este referencia al fichero <code>Dockerfile</code> que podemos encontrar en nuestro proyecto.</p>

                <p>Para desplegar nuestra aplicación ejecutaremos los siguientes comandos desde nuestro directorio <code>etc</code>:</p>

                <ul>
                    <li><strong>docker-compose build</strong>: Creará la imagen correspondiente a nuestra aplicación.</li>
                    <li><strong>docker-compose up -d</strong>: Este comando lanzará los contenedores definidos en nuestro fichero <code>docker-compose.yml</code></li>
                    <li><strong>docker-compose ps</strong>: Muestra el estado de los contenedores definidos. Deberíamos ver 2 registros que se corresponden con el contenedor de nuestra aplicación y con la mongo definida.</li>
                    <li><strong>docker-compose logs</strong>: Visualizaremos los logs escrito por los contenedores. De este modo podremos visualizar los logs escritas por nuestra aplicación a través de <code>winston</code>.</li>
                </ul>

                <p>Para conocer Docker en profundidad y ser capaces de hacer desarrollos de calidad usandolo os recomendamos visitéis nuestro curso de <strong>Especialista en desarrollos con Docker</strong>.</p>

                <p>A través del comando curl podríamos verificar que nuestra aplicación ha sido desplegada correctamente, por ejemplo veamos lo siguientes comandos:</p>

                <ul>
                    <li><strong>Listado de agendas</strong>:</li>
                </ul>

                <div class="highlight"><pre><code class="language-bash" data-lang="bash">curl http://localhost:4000/agendas</code></pre></div>

                <ul>
                    <li><strong>Crear una nueva agenda</strong>:</li>
                </ul>

                <div class="highlight"><pre><code class="language-bash" data-lang="bash">curl -XPOST http://localhost:4000/agendas -H <span class="s1">&#39;Content-Type:application/json&#39;</span> -H <span class="s1">&#39;Accept:application/json&#39;</span> -d <span class="s1">&#39;{&quot;title&quot;:&quot;family&quot;, &quot;description&quot;:&quot;Just family&quot;}&#39;</span> -i</code></pre></div>

                <ul>
                    <li><strong>Añadir un contacto a una agenda</strong>:</li>
                </ul>

                <div class="highlight"><pre><code class="language-bash" data-lang="bash">curl -XPOST http://localhost:4000/agendas/55abe42f9b4ccb140074ed85/contacts -H <span class="s1">&#39;Content-Type:application/json&#39;</span> -d <span class="s1">&#39;{&quot;firstName&quot;:&quot;Ivan&quot;, &quot;lastName&quot;:&quot;Corrales&quot;,&quot;email&quot;:&quot;developer@wesovi.com&quot;}&#39;</span></code></pre></div>

                <h2 id="ejecucin-de-tests-de-integracin-con-contenedores">Ejecución de tests de integración con contenedores</h2>

                <p>Desde un punto de vista personal, el mayor logro de Docker es ofrecernos la posibilidad de hacer testing de gran calidad, ofrenciéndonos ejecutar nuestros tests contra un entorno real y no contra uno de pruebas.  En el direcorio <code>etc</code> de nuestro proyecto podemos observar que tenemos otro fichero llamado <code>docker-compose-test.yml</code>. Este fichero es idéntico al que utilizamos para desplegar nuestra aplicación y la única diferencia entre ambos es el valor de la variable de entorno <code>RUN_MODE</code> que utilizamos para identificar que script debemos ejecutar.</p>

                <div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">mongo</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mongo:latest</span>
                    <span class="l-Scalar-Plain">restart</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">always</span>
                    <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mongod --smallfiles --quiet --logpath=/dev/null --rest --httpinterface</span>
                    <span class="l-Scalar-Plain">ports</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="s">&quot;37017:27017&quot;</span>
                    <span class="p-Indicator">-</span> <span class="s">&quot;38017:28017&quot;</span>

                    <span class="l-Scalar-Plain">application</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">build</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">../</span>
                    <span class="l-Scalar-Plain">ports</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="s">&quot;4000:3000&quot;</span>
                    <span class="l-Scalar-Plain">environment</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">RUN_MODE=test</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">LOGS_DIR=/var/logs/agenda</span>
                    <span class="l-Scalar-Plain">links</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="s">&quot;mongo:mongo&quot;</span>
                    <span class="l-Scalar-Plain">volumes</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">logs:/var/logs/agenda</span></code></pre></div>

                <p>Los pasos a seguir para lanzar nuestros tests haciendo uso de <code>Docker</code> serían los siguientes (Suponiendo que nos encontramos en el directorio <code>etc</code>):</p>

                <ul>
                    <li><strong>docker-compose -f docker-compose-test.yml build</strong>: Creará la imagen correspondiente a nuestra aplicación.</li>
                    <li><strong>docker-compose -f docker-compose-test.yml up -d</strong>: Este comando lanzará los contenedores definidos en nuestro fichero <code>docker-compose.yml</code></li>
                </ul>

                <p>Por defecto <code>docker-compose</code> utiliza el fichero llamado <code>docker-compose-yml</code>, como vemos en el párrafo anterior le indicamos un fichero diferente a través del parámetro <code>-f</code>.</p>

                <p>Al ejecutar nuestros tests se creará un fichero llamado <code>result.spec</code> en nuestro directorio <code>etc/log</code>.  En realidad, cuando ejecutamos nuestra batería de tests de integración lo que queremos saber es el resultado de nuestros tests y no preocuparnos de los problemas derivados por las herramientas. De este modo levantaremos nuestros contenedores y tendremos un <code>report</code> con los resultados de nuestros tests. Esto es muy útil para herramientas de C.I. (Integración Contina) tales como <strong>Jenkins</strong> o <strong>Bamboo</strong>.</p>

                <h2 id="conclusiones">Conclusiones</h2>

                <ul>
                    <li>Docker nos da la posibilidad de hacer uso de la <code>infraestructura como código fuente</code>.</li>
                    <li>Docker nos permite a los desarrolladores tener <code>un entorno idéntico/similar a producción e identico al de cualquiera de nuestros compañeros</code>. Nota: Decimos similar a producción, porque probablemente en producción definamos clusteres en nuestro <code>docker-compose</code></li>
                    <li>Garantiza la <code>calidad de nuestros Tests de Integración y de Aceptación</code> desde el momento que estamos haciendo uso de un sistema real, y no de mocks o servidores de prueba diferentes a producción.</li>
                    <li><code>Ahorro en máquinas</code> que están siempre en ejecución para que podamos ejecutar nuestros tests. De este modo nosotros mismos seremos capaces de levantar y detener nuestros contenedores</li>
                    <li>Como resumen podríamos decir que los contenedores son actualmente la pieza fundamental en los procesos de <code>Integración continua</code> y <code>Despliegue continuo</code>.</li>
                </ul>

                <h2 id="deberes">Deberes</h2>

                <p>Todos sabemos que los tutoriales son muy útiles, aunque realmente aprendemos cuando nos enfrentamos a desarrollos por nosotros mismos. Por eso desde este tutorial nos gustaría sugeriros las siguientes prácticas que os ayudarían a fortalecer los conocimientos adquiridos en este tutorial.</p>

                <ul>
                    <li>Implementar los <code>tests</code> para el resto de servicios implementados.</li>
                    <li>Hacer uso de <code>ngingx</code> que haga de <code>proxy</code> de nuestra aplicación.</li>
                    <li>¿Porque no probar un desarrollo dnde usamos un base de datos relacional y usemos <code>sequealize</code> en lugar de una mongo?</li>
                </ul>

                <h2 id="codigo-fuente">Codigo fuente</h2>

                <p>El código fuente de este proyecto puede ser encontrado en nuestro repositorio público de Github, en el siguiente enlace:  <a target="_blank" class="link" href="https://github.com/abirtone/blog-examples/tree/master/2015-07-28-uso-de-docker-en-aplicacion-de-nodejs">Abirtone Blog Agenda API</a>**</p>

            </article>


        </div>
        <!-- Blog Sidebar Widgets Column -->
        <div class="col-md-4">

            <!-- Side Widget Well -->
            <div class="well">
                <h4>Would you like to write for this blog?</h4>
                <p>If you are one of theses guys who enjoys doing some researches and sharing the knowledge with other colleagues, please feel free to reach us at:</p>
                <a class="emailTo" href="mailto:info@wesovilabs.com">info@wesovilabs.com</a>
                <br/>

            </div>

            <div class="well">
                <h4>Related blogs</h4>
                <ul>
                    <li><a href="../A%20better%20way%20to%20run%20our%20acceptance%20tests/index.html">A better way to run acceptance tests</a></li>
                    <li><a href="../Docker%20para%20test%20de%20integración%20en%20NodeJS/index.html">Docker para tests de integración en NodeJS</a></li>
                    <li><a href="../First%20steps%20with%20Erlang/index.html">First steps with Erlang</a></li>
                    <li><a href="../Go%20for%20dummies/index.html">Go for dummies</a></li>
                    <li><a href="../Implementing%20CORS%20support%20for%20Spray%20applications/index.html">Implementing CORS support for Spray applications</a></li>
                    <li><a href="../Object.freeze%20vs%20Object.seal%20by%20example/index.html">Object.freeze vs Object.seal by example</a></li>

                </ul>
            </div>
            <div class="well">
                <a class="twitter-timeline" href="https://twitter.com/wesovilabs" data-widget-id="712543106898505729">Tweets por el @wesovilabs.</a>
                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </div>
        </div>
    </div>
    <!-- /.row -->

    <ul class="pager">
        <li class="previous">
            <a href="../0.html">&larr; Back to index</a>
        </li>
    </ul>

</div>
<!-- /.container -->

<!-- jQuery -->
<script src="../../js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="../../js/bootstrap.min.js"></script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75463311-1', 'auto');
    ga('send', 'pageview');

</script>
</body>

</html>